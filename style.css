/* =============== THEME TOKENS =============== */
:root{
  --bg:#ffffff; --text:#0e1220; --muted:#5a617a;
  --card:#f6f7fb; --stroke:#e7e9f6;
  --accent:#6b7cff; --accent-2:#7c6cff; --accent-contrast:#0b0d12;
  --linkbar:#0f1422; --linkbar-text:#e7ecff;

  /* единый градиент для ВСЕХ кнопок (светлый, как был у бейджа) */
  --cta-grad: linear-gradient(to right, rgba(123,108,255,.16), rgba(255,184,107,.16));

  --shadow-sm: 0 3px 8px rgba(0,0,0,.12);
  --shadow-md: 0 8px 18px rgba(0,0,0,.16);
  --radius:14px;
}
:root[data-theme="dark"]{
  --bg:#0f1220; --text:#e9ecf8; --muted:#b8bddd;
  --card:#151933; --stroke:#222748;
  --accent:#7c6cff; --accent-2:#6b7cff; --accent-contrast:#0b0d12;
  --linkbar:#0b0f1a; --linkbar-text:#dfe5ff;

  --cta-grad: linear-gradient(to right, rgba(123,108,255,.28), rgba(255,184,107,.24));

  --shadow-sm: 0 3px 12px rgba(0,0,0,.35);
  --shadow-md: 0 12px 28px rgba(0,0,0,.38);
}

/* =============== RESET / BASE =============== */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
a{color:inherit;text-decoration:none}
img{max-width:100%;height:auto;display:block}
.container{max-width:980px;margin:0 auto;padding:16px}

/* =============== TOP BAR =============== */
.topbar{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:8px 0}
.brand{font-weight:800;letter-spacing:.2px}
.theme-toggle{
  border:1px solid var(--stroke); background:var(--card); color:var(--text);
  border-radius:10px; padding:8px 12px; cursor:pointer;
}

/* =============== TABS (сверху, не на всю ширину) =============== */
.tabs{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
.tab{
  border:1px solid var(--stroke); background:var(--card); color:var(--text);
  border-radius:999px; padding:8px 12px; cursor:pointer; font-weight:600;
  white-space:nowrap;
}
.tab[aria-selected="true"]{background:var(--accent);color:var(--accent-contrast);border-color:transparent}

/* =============== HERO (универсально) =============== */
.hero{display:flex;flex-direction:column;gap:12px;margin:6px 0 12px}
h1{font-size:clamp(22px,5.2vw,36px);line-height:1.15;margin:4px 0}
.lead{color:var(--muted);font-size:clamp(14px,3.6vw,18px);margin:0}
.hero img{
  max-height:420px; width:auto; margin:0 auto; border-radius:12px;
  box-shadow:var(--shadow-md); image-rendering:auto;
}

/* =============== CTA: единый градиент для всех кнопок =============== */
.cta,
.cta--sticky,
.cta-outline,
.cta-vertical,
.book .btn,
.actions .cta{
  display:inline-flex; justify-content:center; align-items:center; text-align:center;
  font-weight:800; line-height:1; text-decoration:none;
  background: var(--cta-grad); color: var(--text);
  border:1px solid var(--stroke);
  border-radius:9999px; padding:14px 20px;
  box-shadow: var(--shadow-sm);
  transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
}
.cta{ display:block; width:70%; max-width:320px; margin:12px 0 0; }
.cta:hover,
.book .btn:hover,
.actions .cta:hover{ transform:translateY(-1px); box-shadow:var(--shadow-md); }
.cta:active,
.book .btn:active,
.actions .cta:active{ transform:translateY(1px); box-shadow:none; }

/* убираем «прозрачный» вид у старых .ghost-кнопок, если они помечены как .cta */
.cta.ghost{ background: var(--cta-grad); color: var(--text); border:1px solid var(--stroke); box-shadow:var(--shadow-sm); }

/* =============== LINK STRIP =============== */
.strip{margin:18px 0;background:var(--linkbar);color:var(--linkbar-text); box-shadow:inset 0 -1px 0 rgba(255,255,255,.06)}
.strip .inner{
  max-width:980px;margin:0 auto;padding:10px 12px;
  display:flex;gap:10px;flex-wrap:wrap;justify-content:center
}
.chip{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid rgba(255,255,255,.16);
  border-radius:999px;padding:8px 12px;background:rgba(255,255,255,.08);
  backdrop-filter:saturate(120%) blur(2px);
}
.chip img{ width:20px;height:20px;display:inline-block;vertical-align:-4px;margin-right:0 }

/* =============== GRID (книги) =============== */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.book{
  background:var(--card);border:1px solid var(--stroke);
  border-radius:var(--radius);padding:12px;
  display:grid;grid-template-columns:110px 1fr;gap:12px;align-items:center;
  box-shadow:var(--shadow-sm);
}
.book img{width:110px;aspect-ratio:2 / 3;object-fit:cover;border-radius:10px;box-shadow:var(--shadow-sm)}
.book h3{font-size:17px;margin:0 0 4px}
.book p{color:var(--muted);font-size:14px;margin:0 0 8px}
.book .btn{justify-self:start}

/* =============== MODAL =============== */
dialog.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px}
dialog[open]{display:flex}
.sheet{
  max-width:860px;width:100%;background:var(--bg);color:var(--text);
  border:1px solid var(--stroke);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-md)
}
.sheet-head{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--stroke)}
.sheet-body{display:grid;grid-template-columns:1fr;gap:12px;padding:12px}
.sheet-body img{width:100%;border-radius:10px;box-shadow:var(--shadow-sm)}
.desc{color:var(--muted);font-size:15px;line-height:1.55;max-height:40vh;overflow:auto}
.thumbs{display:flex;gap:8px;flex-wrap:wrap}
.thumbs img{width:92px;height:120px;object-fit:cover;border-radius:8px;border:1px solid var(--stroke);cursor:pointer}
.actions{display:flex;gap:8px;flex-wrap:wrap}

/* =============== FOOTER =============== */
footer{margin:22px 0 10px;color:var(--muted);font-size:12px;text-align:center}

/* =============== MOBILE (<=768px) =============== */
@media (max-width:768px){
  /* Tabs — по центру, компактные */
  .tabs{ justify-content:center; }

  /* Порядок: заголовок → описание → кнопка → изображение */
  .hero{ display:flex; flex-direction:column; gap:12px; margin-bottom:18px; }
  .hero h1{ order:1; }
  .hero .lead{ order:2; }
  .hero .cta{ order:3; width:82%; max-width:360px; margin:10px auto 0; padding:14px 20px; border-radius:9999px; font-weight:800; }
  .hero img{ order:4; max-width:85vw; max-height:55vh; width:auto; margin:0 auto; border-radius:12px; box-shadow:0 8px 18px rgba(0,0,0,.12); }

  .grid{ grid-template-columns:1fr; gap:14px; }
  .book{ grid-template-columns:96px 1fr; padding:12px; border-radius:14px; }
  .book img{ width:96px; }
  .book .btn{ width:100%; padding:12px 16px; border-radius:9999px; font-weight:700; }

  .sheet{ border-radius:16px; }
  .sheet-body{ gap:12px; padding:14px; }
  .sheet-body img{ max-width:100%; max-height:40vh; object-fit:contain; margin:0 auto; display:block; border-radius:10px; }
  .desc{ max-height:38vh; overflow:auto; -webkit-overflow-scrolling: touch; line-height:1.55; }

  .cta--sticky{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom: 12px; width:90%; max-width:440px;
    padding:14px 22px; border-radius:9999px; z-index:1000;
    box-shadow:0 12px 26px rgba(0,0,0,.45);
    padding-bottom: calc(14px + env(safe-area-inset-bottom, 0px));
    display:flex;
  }
}

/* =============== DESKTOP SPLIT (>=1024px) =============== */
@media (min-width:1024px){
  /* общий контейнер-решётка для tabs и hero */
  .layout-split{
    display:grid;
    grid-template-columns: 1fr min(420px, 36vw);
    gap: 22px;
    align-items: start;
  }

  /* Tabs занимают правую колонку сверху (не на всю ширину) */
  .tabs--top{
    grid-column:2;
    justify-content:flex-start;
    padding-bottom:8px;
  }

  /* сам hero кладём в обе колонки, но контент раскладываем */
  .hero--split{ display:contents; }
  .hero-media{ grid-column:1; grid-row:2; }
  .hero-media img{
    width:100%; height:auto; max-height:72vh; object-fit:contain;
    border-radius:14px; box-shadow:var(--shadow-md);
  }

  .hero-side{
    grid-column:2; grid-row:2;
    display:grid; gap:12px; align-content:start;
  }
  .hero-side h1{ order:1; margin:8px 0 0; }
  .hero-side .lead{ order:2; }
  .hero-side .cta{ order:3; width:100%; max-width:none; margin-top:10px; }
}

/* Accessibility / reduce motion */
@media (prefers-reduced-motion:reduce){
  .cta, .book .btn, .actions .cta{ transition:none; }
}

/* Utils */
.hidden{display:none!important}
.center{text-align:center}
/* === BUTTONS: один градиент везде (и на мобиле) === */
:root{
  --cta-grad: linear-gradient(to right, rgba(123,108,255,.16), rgba(255,184,107,.16));
}
.cta,
.cta--sticky,
.book .btn,
.actions .cta{
  background: var(--cta-grad);
  color: var(--text);
  border:1px solid var(--stroke);
  border-radius:9999px;
  box-shadow: var(--shadow-sm);
  transition: transform .15s ease, box-shadow .15s ease;
}
.cta:hover, .book .btn:hover, .actions .cta:hover{ transform:translateY(-1px); box-shadow:var(--shadow-md); }
.cta:active, .book .btn:active, .actions .cta:active{ transform:translateY(1px); box-shadow:none; }

/* === DESKTOP (>=1024px): split hero + tabs не на всю ширину === */
@media (min-width:1024px){
  /* 1) Делаем из hero двухколоночную сетку БЕЗ правок HTML */
  .hero{
    display:grid;
    grid-template-columns: 1fr min(420px, 36vw); /* слева картинка, справа контент */
    column-gap:22px;
    align-items:start;
  }
  /* размещаем элементы по колонкам */
  #hero-img{ grid-column:1; grid-row:1 / span 3; width:100%; height:auto; max-height:72vh; object-fit:contain; }
  #hero-title{ grid-column:2; grid-row:1; margin:8px 0 0; }
  #hero-lead{  grid-column:2; grid-row:2; }
  #hero-cta{   grid-column:2; grid-row:3; width:100%; max-width:none; margin:10px 0 0; }

  /* 2) Tabs сверху, но не на всю ширину и выровнены с правой колонкой
     (начинаются там же, где правая колонка hero) */
  .tabs{
    width: min(420px, 36vw);
    /* магия выравнивания: смещаем tabs так, чтобы их левый край совпал с левым краем правой колонки */
    margin-left: calc(100% - min(420px, 36vw));
    justify-content:flex-start;
  }
}

/* === MOBILE sticky CTA (осталось как было, но с тем же градиентом) === */
@media (max-width:768px){
  .cta--sticky{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom: 12px; width:90%; max-width:440px; padding:14px 22px;
    border-radius:9999px; z-index:1000; box-shadow:0 12px 26px rgba(108,124,255,.45);
    padding-bottom: calc(14px + env(safe-area-inset-bottom, 0px));
  }
}
