/* =============== THEME TOKENS =============== */
:root{
  --bg:#ffffff;
  --text:#0e1220;
  --muted:#5a617a;
  --card:#f6f7fb;
  --stroke:#e7e9f6;
  --accent:#6b7cff;
  --accent-2:#7c6cff;
  --accent-contrast:#0b0d12;
  --linkbar:#f0f0f0;
  --linkbar-text:#333;
  --shadow-sm: 0 3px 8px rgba(0,0,0,.12);
  --shadow-md: 0 8px 18px rgba(0,0,0,.12);
  --radius:14px;
}
:root[data-theme="dark"]{
  --bg:#0f1220;
  --text:#e9ecf8;
  --muted:#b8bddd;
  --card:#151933;
  --stroke:#222748;
  --accent:#7c6cff;
  --accent-2:#6b7cff;
  --accent-contrast:#0b0d12;
  --linkbar:#2a2a2a;
  --linkbar-text:#e0e0e0;
  --shadow-sm: 0 3px 10px rgba(0,0,0,.35);
  --shadow-md: 0 12px 28px rgba(0,0,0,.35);
}

/* =============== RESET / BASE =============== */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
a{color:inherit;text-decoration:none}
img{max-width:100%;height:auto;display:block}
.container{max-width:820px;margin:0 auto;padding:16px}

/* =============== TOP BAR =============== */
.topbar{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:8px 0}
.brand{font-weight:800;letter-spacing:.2px}
.theme-toggle{
  border:1px solid var(--stroke);
  background:var(--card);
  color:var(--text);
  border-radius:10px;
  padding:8px 12px;
  cursor:pointer;
}

/* =============== TABS =============== */
.tabs{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
.tab{
  border:1px solid var(--stroke);
  background:var(--card);
  color:var(--text);
  border-radius:999px;
  padding:8px 12px;
  cursor:pointer;
  font-weight:600;
}
.tab[aria-selected="true"]{background:var(--accent);color:var(--accent-contrast);border-color:transparent}

/* =============== HERO =============== */
.hero{display:flex;flex-direction:column;gap:12px;margin:6px 0 12px}
.badge{
  display:inline-flex;gap:8px;align-items:center;
  background:linear-gradient(to right, rgba(123,108,255,.16), rgba(255,184,107,.16));
  border:1px solid var(--stroke);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px
}
h1{font-size:clamp(22px,5.2vw,36px);line-height:1.15;margin:4px 0}
.lead{color:var(--muted);font-size:clamp(14px,3.6vw,18px);margin:0}

/* hero image (desktop/tablet) */
.hero img{
  max-height:420px;
  width:auto;
  margin:0 auto;
  border-radius:12px;
  box-shadow:var(--shadow-md);
}

/* =============== CTA (base) =============== */
.cta{
  display:block;
  text-align:center;
  font-weight:800;
  background:linear-gradient(90deg, var(--accent), var(--accent-2));
  color:#fff;
  border:2px solid #cfcfd6; /* деликатный контур */
  border-radius:9999px;
  padding:14px 20px;
  margin:12px auto 0;
  width:70%;
  max-width:320px;
  box-shadow:0 6px 16px rgba(108,124,255,.45);
  transition:transform .15s ease, box-shadow .15s ease;
}
.cta:hover{transform:translateY(-1px);box-shadow:0 10px 22px rgba(108,124,255,.55)}
.ghost{background:transparent;color:var(--text);border:1px solid var(--stroke);box-shadow:none}

/* ===== CTA variants (experiments) ===== */

/* Контурная версия */
.cta-outline{
  background:transparent;
  color:var(--text);
  border:2px solid var(--stroke);
  box-shadow:none;
}

/* Мягкие скругления */
.cta-soft{
  border-radius:14px;
  box-shadow:var(--shadow-sm);
}

/* Вертикальные «рельсы» по бокам */
.cta-vertical,
.cta.vertical{ /* совместимость со старым классом */
  background:var(--bg);
  color:var(--text);
  border-radius:14px;
  border:none;
  position:relative;
  box-shadow:var(--shadow-sm);
}
.cta-vertical::before,
.cta-vertical::after,
.cta.vertical::before,
.cta.vertical::after{
  content:"";
  position:absolute;
  top:6px; bottom:6px;
  width:4px; border-radius:2px;
  background:var(--stroke);
}
.cta-vertical::before,.cta.vertical::before{ left:8px; }
.cta-vertical::after,.cta.vertical::after{ right:8px; }
.cta-outline:hover,
.cta-soft:hover,
.cta-vertical:hover,
.cta.vertical:hover{
  transform:translateY(-1px);
  box-shadow:var(--shadow-md);
}

/* =============== LINK STRIP =============== */
.strip{margin:14px 0;background:var(--linkbar);color:var(--linkbar-text)}
.strip .inner{
  max-width:820px;margin:0 auto;padding:8px 12px;
  display:flex;gap:10px;flex-wrap:wrap;justify-content:center
}
.chip{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid rgba(0,0,0,.08);
  border-radius:999px;padding:8px 12px;background:rgba(255,255,255,.6);
  backdrop-filter:saturate(120%) blur(2px);
}
.chip img{ width:20px;height:20px;display:inline-block;vertical-align:-4px;margin-right:0; }

/* =============== BOOK GRID (desktop default) =============== */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.book{
  background:var(--card);border:1px solid var(--stroke);
  border-radius:var(--radius);padding:12px;
  display:grid;grid-template-columns:110px 1fr;gap:12px;align-items:center;
  box-shadow:var(--shadow-sm);
}
.book img{width:110px;height:auto;border-radius:10px;box-shadow:var(--shadow-sm)}
.book h3{font-size:17px;margin:0 0 4px}
.book p{color:var(--muted);font-size:14px;margin:0 0 8px}
.book .btn{justify-self:start}

/* =============== MODAL (dialog) =============== */
dialog.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px}
dialog[open]{display:flex}
.sheet{
  max-width:860px;width:100%;background:var(--bg);color:var(--text);
  border:1px solid var(--stroke);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-md)
}
.sheet-head{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--stroke)}
.sheet-body{display:grid;grid-template-columns:1fr;gap:12px;padding:12px}
.sheet-body img{width:100%;border-radius:10px;box-shadow:var(--shadow-sm)}
.desc{color:var(--muted);font-size:15px;line-height:1.55;max-height:40vh;overflow:auto}
.thumbs{display:flex;gap:8px;flex-wrap:wrap}
.thumbs img{width:92px;height:120px;object-fit:cover;border-radius:8px;border:1px solid var(--stroke);cursor:pointer}
.actions{display:flex;gap:8px;flex-wrap:wrap}

/* =============== FOOTER =============== */
footer{margin:22px 0 10px;color:var(--muted);font-size:12px;text-align:center}

/* ======================= MOBILE (<=768px) ======================= */
@media (max-width: 768px){
  .hero{ display:flex; flex-direction:column; gap:12px; margin-bottom:18px; }
  .hero .badge{ order:1 }
  .hero h1{ order:2; }
  .hero .lead{ order:3; }
  .hero img{
    order:4; max-width:85vw; max-height:55vh; width:auto; margin:0 auto;
    border-radius:12px; box-shadow:0 8px 18px rgba(0,0,0,.12);
  }
  .hero .cta{
    order:5; width:82%; max-width:360px; margin:10px auto 0; padding:14px 20px;
    border-radius:9999px; font-weight:800;
  }

  .grid{ grid-template-columns:1fr; gap:14px; }
  .book{ grid-template-columns:96px 1fr; padding:12px; border-radius:14px; }
  .book img{ width:96px; }
  .book h3{ font-size:18px; margin:0 0 6px; }
  .book p{ font-size:14px; margin:0 0 10px; }
  .book .btn{ width:100%; padding:12px 16px; border-radius:9999px; font-weight:700; }

  .sheet{ border-radius:16px; }
  .sheet-body{ gap:12px; padding:14px; }
  .sheet-body img{
    max-width:100%; max-height:40vh; object-fit:contain; margin:0 auto; display:block; border-radius:10px;
  }
  .desc{ max-height:38vh; overflow:auto; -webkit-overflow-scrolling: touch; line-height:1.55; }

  .cta--sticky{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom: 12px; width:90%; max-width:440px; padding:14px 22px;
    border-radius:9999px; z-index:1000; box-shadow:0 12px 26px rgba(108,124,255,.45);
    padding-bottom: calc(14px + env(safe-area-inset-bottom, 0px));
  }
}

/* Accessibility / reduce motion */
@media (prefers-reduced-motion:reduce){ .cta{transition:none} }

/* Utils */
.hidden{display:none!important}
.center{text-align:center}
/* ================= CHIP COLORS (как бейдж) ================= */
.strip .chip{
  background:linear-gradient(to right,
    rgba(123,108,255,.16),
    rgba(255,184,107,.16));
  border:1px solid var(--stroke);
  color:var(--text);
  backdrop-filter:none; /* убираем блюр, чтобы градиент не мутнел */
}

.strip .chip img{
  filter:none; /* иконки оставляем как есть */
}
