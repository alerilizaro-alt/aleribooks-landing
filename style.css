/* =============== THEME TOKENS =============== */
:root{
  /* Light */
  --bg:#ffffff; --text:#0e1220; --muted:#5a617a;
  --card:#f6f7fb; --stroke:#e7e9f6;
  --accent:#6b7cff; --accent-2:#7c6cff; --accent-contrast:#0b0d12;
  --linkbar:#0e1220; --linkbar-text:#ffffff;

  --shadow-sm: 0 3px 8px rgba(0,0,0,.12);
  --shadow-md: 0 8px 18px rgba(0,0,0,.12);
  --radius:14px;
}
:root[data-theme="dark"]{
  --bg:#0f1220; --text:#e9ecf8; --muted:#b8bddd;
  --card:#151933; --stroke:#222748;
  --accent:#7c6cff; --accent-2:#6b7cff; --accent-contrast:#0b0d12;
  --linkbar:#0b0e1a; --linkbar-text:#dfe3ff;

  --shadow-sm: 0 3px 10px rgba(0,0,0,.35);
  --shadow-md: 0 12px 28px rgba(0,0,0,.35);
}

/* =============== RESET / BASE =============== */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
a{color:inherit;text-decoration:none}
img{max-width:100%;height:auto;display:block}
.container{max-width:820px;margin:0 auto;padding:16px}

/* =============== TOP BAR =============== */
.topbar{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:8px 0}
.brand{font-weight:800;letter-spacing:.2px}
.theme-toggle{
  border:1px solid var(--stroke); background:var(--card); color:var(--text);
  border-radius:10px; padding:8px 12px; cursor:pointer;
}

/* =============== TABS =============== */
.tabs{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
.tab{
  border:1px solid var(--stroke); background:var(--card); color:var(--text);
  border-radius:999px; padding:8px 12px; cursor:pointer; font-weight:600;
}
.tab[aria-selected="true"]{background:var(--accent);color:var(--accent-contrast);border-color:transparent}

/* =============== HERO =============== */
.hero{display:flex;flex-direction:column;gap:12px;margin:6px 0 12px}
.badge{
  display:inline-flex;gap:8px;align-items:center;
  background:linear-gradient(to right, rgba(123,108,255,.16), rgba(255,184,107,.16));
  border:1px solid var(--stroke); border-radius:999px; padding:6px 10px; font-size:12px
}
h1{font-size:clamp(22px,5.2vw,36px);line-height:1.15;margin:4px 0}
.lead{color:var(--muted);font-size:clamp(14px,3.6vw,18px);margin:0}

/* дефолтный hero image (десктоп/таблет) */
.hero img{
  max-height:420px; width:auto; margin:0 auto; border-radius:12px;
  box-shadow:var(--shadow-md);
}

/* CTA */
.cta{
  display:block; text-align:center; font-weight:800;
  background:linear-gradient(90deg, var(--accent), var(--accent-2)); color:#fff;
  border:0; border-radius:9999px; padding:14px 20px; margin:12px auto 0;
  width:70%; max-width:320px;
  box-shadow:0 6px 16px rgba(108,124,255,.45);
  transition:transform .15s ease, box-shadow .15s ease;
}
.cta:hover{transform:translateY(-1px);box-shadow:0 10px 22px rgba(108,124,255,.55)}
.ghost{background:transparent;color:var(--text);border:1px solid var(--stroke);box-shadow:none}

/* =============== LINK STRIP =============== */
.strip{margin:14px 0;background:var(--linkbar);color:var(--linkbar-text)}
.strip .inner{
  max-width:820px;margin:0 auto;padding:8px 12px;
  display:flex;gap:8px;flex-wrap:wrap;justify-content:center
}
.chip{display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,.18);border-radius:999px;padding:8px 12px}

/* =============== BOOK GRID =============== */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.book{
  background:var(--card);border:1px solid var(--stroke);
  border-radius:var(--radius);padding:12px;
  display:grid;grid-template-columns:110px 1fr;gap:12px;align-items:center;
  box-shadow:var(--shadow-sm);
}
.book img{width:110px;height:auto;border-radius:10px;box-shadow:var(--shadow-sm)}
.book h3{font-size:17px;margin:0 0 4px}
.book p{color:var(--muted);font-size:14px;margin:0 0 8px}
.book .btn{justify-self:start}

/* =============== MODAL (dialog) =============== */
dialog.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px}
dialog[open]{display:flex}
.sheet{
  max-width:860px;width:100%;background:var(--bg);color:var(--text);
  border:1px solid var(--stroke);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-md)
}
.sheet-head{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--stroke)}
.sheet-body{display:grid;grid-template-columns:1fr;gap:12px;padding:12px}
.sheet-body img{width:100%;border-radius:10px;box-shadow:var(--shadow-sm)}
.desc{color:var(--muted);font-size:15px;line-height:1.55;max-height:40vh;overflow:auto}
.thumbs{display:flex;gap:8px;flex-wrap:wrap}
.thumbs img{width:92px;height:120px;object-fit:cover;border-radius:8px;border:1px solid var(--stroke);cursor:pointer}
.actions{display:flex;gap:8px;flex-wrap:wrap}

/* =============== FOOTER =============== */
footer{margin:22px 0 10px;color:var(--muted);font-size:12px;text-align:center}

/* =========================================================
   MOBILE TUNING (добавлено по твоему запросу)
   ========================================================= */

/* Переставляем элементы внутри hero: badge -> h1 -> lead -> image -> CTA */
.hero .badge{order:1}
.hero h1{order:2}
.hero .lead{order:3}
/* На мобильных делаем обложку шире и ограничиваем высоту */
@media (max-width:599px){
  .hero img{
    order:4;
    max-width:85vw;       /* ≈80–85% ширины экрана */
    max-height:70vh;      /* не захватывает весь экран */
    width:auto; margin:0 auto;
  }
  .hero .cta{
    order:5;
    width:78%; max-width:360px;
    margin:8px auto 0;
  }
  /* одна колонка карточек */
  .grid{grid-template-columns:1fr}
  .book{grid-template-columns:92px 1fr}
  .book img{width:92px}
  /* больше воздуха между секциями */
  .container > .hero{margin-bottom:18px}
  .strip{margin:18px 0}
}

/* Sticky CTA (опционально): добавь <a class="cta cta--sticky"> рядом с футером */
.cta--sticky{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:14px; width:88%; max-width:420px;
  border-radius:9999px; padding:14px 22px; z-index:1000;
  box-shadow:0 12px 26px rgba(108,124,255,.45);
}

/* Tablet tweaks */
@media (min-width:600px){
  .hero img{max-height:520px}
  .hero .cta{width:60%;max-width:360px}
}

/* Desktop: возвращаем 2 колонки для списка */
@media (min-width:900px){
  .grid{grid-template-columns:1fr 1fr}
  .book{grid-template-columns:110px 1fr}
  .book img{width:110px}
}

/* Accessibility / reduce motion */
@media (prefers-reduced-motion:reduce){ .cta{transition:none} }

/* Utils */
.hidden{display:none!important}
.center{text-align:center}

/* =======================
   MOBILE OVERRIDES (<=768px)
   ======================= */
@media (max-width: 768px){

  /* --- HERO: порядок и размеры --- */
  .hero{ display:flex; flex-direction:column; gap:12px; margin-bottom:18px; }
  .hero .badge{ order:1 }
  .hero h1{ order:2; }
  .hero .lead{ order:3; }
  .hero img{
    order:4;
    max-width:85vw;      /* ширина обложки ~80–85% */
    max-height:55vh;     /* не перехватывает весь экран */
    width:auto; margin:0 auto;
    border-radius:12px; box-shadow:0 8px 18px rgba(0,0,0,.12);
  }
  .hero .cta{
    order:5;
    width:82%; max-width:360px;
    margin:10px auto 0;
    padding:14px 20px;
    border-radius:9999px; font-weight:800;
  }

  /* --- LINK STRIP: иконки Amazon/TikTok --- */
  .strip{ margin:18px 0; }
  .strip .inner{ gap:10px; }
  .chip{ padding:8px 12px; border-radius:999px; }
  .chip img{
    width:20px; height:20px;
    display:inline-block; vertical-align:-4px;
    margin-right:8px;
  }

  /* --- GRID: одна колонка --- */
  .grid{
    display:grid;
    grid-template-columns: 1fr;
    gap:14px;
  }
  .book{
    grid-template-columns: 96px 1fr;
    padding:12px; border-radius:14px;
  }
  .book img{ width:96px; height:auto; border-radius:10px; }
  .book h3{ font-size:18px; margin:0 0 6px; }
  .book p{ font-size:14px; margin:0 0 10px; }
  .book .btn{
    width:100%;
    padding:12px 16px;
    border-radius:9999px;
    font-weight:700;
  }

  /* --- MODAL: обложка и текст не «выпирают» --- */
  .sheet{ border-radius:16px; }
  .sheet-body{ gap:12px; padding:14px; }
  .sheet-body img{
    max-width:100%;
    max-height:40vh;     /* короче — помещается на экране */
    object-fit:contain;
    margin:0 auto; display:block;
    border-radius:10px;
  }
  .desc{
    max-height:38vh; overflow:auto;
    -webkit-overflow-scrolling: touch;
    line-height:1.55;
  }

  /* --- STICKY CTA (по желанию): добавь <a class="cta cta--sticky">… --- */
  .cta--sticky{
    position:fixed;
    left:50%; transform:translateX(-50%);
    bottom: 12px;
    width:90%; max-width:440px;
    padding:14px 22px;
    border-radius:9999px;
    z-index:1000;
    box-shadow:0 12px 26px rgba(108,124,255,.45);
    /* безопасная зона iOS */
    padding-bottom: calc(14px + env(safe-area-inset-bottom, 0px));
  }
}
/* ===== CTA buttons – базовая система ===== */
:root{
  --cta-bg:      #1a73e8;         /* основной (светлая тема) */
  --cta-fg:      #ffffff;
  --cta-bg-dark: #2b84ff;         /* тёмная тема / hover */
  --cta-ring:    34,120,242;      /* для фокуса (rgb) */
  --cta-soft:    16px;            /* мягкие скругления */
  --cta-gap:     10px;
  --cta-sep:     rgba(255,255,255,.25);
  --cta-outline: rgba(26,115,232,.2); /* контур у outline-варианта */
}

:root.dark{
  --cta-bg:      #3b82f6;
  --cta-fg:      #0b1220;
  --cta-bg-dark: #60a5fa;
  --cta-sep:     rgba(0,0,0,.22);
  --cta-outline: rgba(96,165,250,.28);
}

/* База для всех кнопок */
.btn,
.cta{
  -webkit-tap-highlight-color: transparent;
  appearance: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--cta-gap);
  min-height: 48px;
  padding: 12px 18px;
  font: 600 16px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  border-radius: var(--cta-soft);
  border: none;
  cursor: pointer;
  text-decoration: none;
  user-select: none;
  position: relative;
  transition: transform .06s ease, filter .2s ease, background-color .2s ease, box-shadow .2s ease;
}

/* Solid (по умолчанию) */
.cta{
  background: var(--cta-bg);
  color: var(--cta-fg);
  box-shadow: 0 6px 16px rgba(0,0,0,.15);
}
.cta:hover{ background: var(--cta-bg-dark); filter: saturate(1.05); }
.cta:active{ transform: translateY(1px) scale(.99); }
.cta:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 3px rgba(var(--cta-ring), .3),
    0 6px 16px rgba(0,0,0,.18);
}

/* Иконка слева у кнопки */
.cta .icon,
.cta-outline .icon,
.cta-vertical .icon{
  width: 22px; height: 22px; flex: 0 0 auto;
}
.cta .sub,
.cta-outline .sub,
.cta-vertical .sub{
  font-weight: 500;
  opacity: .9;
}

/* ===== Вариант 1: Outline (контур + заливка при hover) ===== */
.cta-outline{
  background:
    linear-gradient(var(--page-bg, #0b1220), var(--page-bg, #0b1220)) padding-box, /* фон страницы внутри */
    linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,0)) border-box; /* «стеклянный» контур */
  border: 2px solid transparent;
  color: inherit;
  border-radius: var(--cta-soft);
  box-shadow: inset 0 0 0 1px var(--cta-outline);
}
:root:not(.dark) .cta-outline{ --page-bg: #fff; }
.cta-outline:hover{
  background:
    linear-gradient(var(--cta-bg), var(--cta-bg)) padding-box,
    linear-gradient(180deg, rgba(255,255,255,.8), rgba(255,255,255,0)) border-box;
  color: var(--cta-fg);
}
.cta-outline:active{ transform: translateY(1px) scale(.99); }
.cta-outline:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px rgba(var(--cta-ring), .25), inset 0 0 0 1px var(--cta-outline);
}

/* ===== Вариант 2: Vertical (внутренние вертикальные линии-сепараторы) ===== */
.cta-vertical{
  background: var(--cta-bg);
  color: var(--cta-fg);
  padding: 12px 16px;
}
.cta-vertical .content{
  display: grid;
  grid-auto-flow: column;
  align-items: center;
  column-gap: 14px;
}
.cta-vertical .chunk{
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.cta-vertical .chunk + .chunk{
  position: relative;
  padding-left: 14px;
}
.cta-vertical .chunk + .chunk::before{
  content: "";
  position: absolute;
  left: 0; top: 50%;
  transform: translateY(-50%);
  width: 1px; height: 24px;
  background: var(--cta-sep);
  border-radius: 1px;
}

.cta-vertical:hover{ background: var(--cta-bg-dark); }
.cta-vertical:active{ transform: translateY(1px) scale(.99); }
.cta-vertical:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px rgba(var(--cta-ring), .3);
}

/* Размеры (можно комбинировать) */
.cta--lg{ min-height: 54px; padding: 14px 22px; font-size: 17px; }
.cta--xl{ min-height: 60px; padding: 16px 24px; font-size: 18px; }

/* Вариант на всю ширину для мобильных */
.cta--block,
.cta-outline--block,
.cta-vertical--block{
  width: 100%;
}

/* Иконка Amazon в кнопке */
.cta .amazon, .cta-outline .amazon, .cta-vertical .amazon{
  height: 18px; width: auto;
}

/* ===== Микровзаимодействие «волна» на нажатие (без JS библиотек) ===== */
.cta, .cta-outline, .cta-vertical{
  overflow: hidden;
}
.cta::after, .cta-outline::after, .cta-vertical::after{
  content:"";
  position:absolute; inset:auto auto 0 50%;
  width:0; height:0; border-radius:50%;
  background: rgba(255,255,255,.25);
  transform: translate(-50%, 50%);
  transition: width .35s ease, height .35s ease, opacity .5s ease;
  opacity: 0;
}
.cta:active::after, .cta-outline:active::after, .cta-vertical:active::after{
  width: 180px; height: 180px; opacity: .35;
}

/* ===== Sticky CTA (нижняя панель) – мобильная доработка ===== */
.sticky-cta{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
  backdrop-filter: saturate(140%) blur(8px);
  background: color-mix(in oklab, var(--page-bg, #fff) 85%, transparent);
  border-top: 1px solid rgba(0,0,0,.06);
  z-index: 50;
}
:root.dark .sticky-cta{
  --page-bg: #0b1220;
  border-top-color: rgba(255,255,255,.08);
}
.sticky-cta .inner{
  max-width: 720px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

/* Компенсируем высоту панели, чтобы контент не прятался */
.has-sticky{ padding-bottom: calc(80px + env(safe-area-inset-bottom)); }

/* ===== Мобильные улучшения ===== */
@media (max-width: 480px){
  .cta, .cta-outline, .cta-vertical{
    min-height: 48px; font-size: 15.5px;
  }
  .cta-vertical .chunk .sub{ display:none; } /* экономим место */
}

/* ===== Уважение к prefers-reduced-motion ===== */
@media (prefers-reduced-motion: reduce){
  .cta, .cta-outline, .cta-vertical{ transition: none; }
  .cta::after, .cta-outline::after, .cta-vertical::after{ display:none; }
}
